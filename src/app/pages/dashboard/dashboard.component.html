<!-- Toast Container -->
<div class="position-fixed top-0 end-0 p-3" style="z-index: 9999">
  <div id="importSuccessToast" class="toast align-items-center text-bg-success border-0" role="alert">
    <div class="d-flex">
      <div class="toast-body">Employees imported successfully!</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
    </div>
  </div>

  <div id="importErrorToast" class="toast align-items-center text-bg-danger border-0" role="alert">
    <div class="d-flex">
      <div class="toast-body">Error importing employees.</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
    </div>
  </div>

  <div id="exportSuccessToast" class="toast align-items-center text-bg-success border-0" role="alert">
    <div class="d-flex">
      <div class="toast-body">Employees exported successfully!</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
    </div>
  </div>

  <div id="exportErrorToast" class="toast align-items-center text-bg-danger border-0" role="alert">
    <div class="d-flex">
      <div class="toast-body">Error exporting employees.</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
    </div>
  </div>
</div>


<div class="container-fluid vh-100">
  <div class="row">
    <div class="col-md-9 col-lg-12 p-4">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="text-dark">Dashboard</h2>
      </div>

      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4 mb-4">
        <div class="col">
          <div class="card text-white bg-info h-100 text-center">
            <div class="card-body">
              <h6 class="card-title">TOTAL EMPLOYEES</h6>
              <h1 class="card-text">{{totalEmployees}} <i class="bi bi-people-fill"></i></h1>
            </div>
          </div>
        </div>

        <div class="col">
          <div class="card text-white bg-info h-100 text-center">
            <div class="card-body">
              <h6 class="card-title">TEAM MEMBERS</h6>
              <h1 class="card-text">{{reporteesCount}} <i class="bi bi-person-hearts"></i></h1>
            </div>
          </div>
        </div>

        <div class="col">
          <div class="card text-white bg-info h-100 text-center">
            <div class="card-body">
              <h6 class="card-title">RECENT FEEDBACK</h6>
              <h1 class="card-text">
                {{feedbackCount}} <i class="bi bi-chat-left-text-fill"></i>
              </h1>
            </div>
          </div>
        </div>

        <div class="col">
          <div class="card text-white bg-info h-100 text-center">
            <div class="card-body">
              <h6 class="card-title">CURRENT QUARTER</h6>
              <h2 class="card-text">
                Q2-2025 <i class="bi bi-calendar-event"></i>
              </h2>
            </div>
          </div>
        </div>
      </div>

      <div class="row row-cols-1 row-cols-md-1 g-4 mb-4">
        <!-- Skill Distribution Card -->
        <!-- <div class="col"> -->
          <div class="card text-white h-100">
            <div class="card-body">
              <h5 class="card-title text-center text-dark">Team Skill Distribution</h5>
              <div class="d-flex justify-content-center align-items-center">
                <div style="width: 400px; height: 400px">
                  <canvas
                    baseChart
                    [data]="pieChartData"
                    [options]="pieChartOptions"
                    [type]="'pie'"
                  >
                  </canvas>
                </div>
              </div>
            </div>
          <!-- </div> -->
        </div>
        
        

    </div>

    <div class="mt-4 p-3 rounded bg-light border quick-links">
      <h5 class="mb-3">Quick Actions</h5>
      <div class="d-flex flex-wrap justify-content-evenly gap-2">
        <button
          class="btn btn-primary btn-sm flex-fill mx-1"
          (click)="navigateToAddEmployee()"
        >
          <i class="bi bi-plus-circle me-2"></i> Add New Employee
        </button>
        <button
          class="btn btn-info btn-sm text-white flex-fill mx-1"
          (click)="navigateToEmployees()"
        >
          <i class="bi bi-list-ul me-2"></i> View All Employee Details
        </button>
        <!-- Hidden file input -->
        <input
          type="file"
          #fileInput
          id="fileInput"
          style="display: none"
          (change)="onFileChange($event)"
        />

        <!-- Button that triggers file input -->
        <!-- Hidden file input restricted to .csv and Excel formats -->
        <input
          type="file"
          #fileInput
          id="fileInput"
          style="display: none"
          accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"
          (change)="onFileChange($event)"
        />

        <!-- Button that opens the file input -->
        <button
          class="btn btn-success btn-sm flex-fill mx-1"
          (click)="fileInput.click()"
        >
          <i class="bi bi-upload me-2"></i> Import Employee Data
        </button>

        <button
          class="btn btn-warning btn-sm flex-fill mx-1"
          (click)="onExport()"
        >
          <i class="bi bi-download me-2"></i> Export Employee Data
        </button>
      </div>
    </div>

  </div>
</div>

<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 9999">
  <div id="importSuccessToast" class="toast align-items-center text-bg-success border-0" role="alert">
    <div class="d-flex">
      <div class="toast-body">Employees imported successfully!</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
    </div>
  </div>

  <div id="importErrorToast" class="toast align-items-center text-bg-danger border-0" role="alert">
    <div class="d-flex">
      <div class="toast-body">Error importing employees.</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
    </div>
  </div>

  <div id="exportSuccessToast" class="toast align-items-center text-bg-success border-0" role="alert">
    <div class="d-flex">
      <div class="toast-body">Employees exported successfully!</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
    </div>
  </div>

  <div id="exportErrorToast" class="toast align-items-center text-bg-danger border-0" role="alert">
    <div class="d-flex">
      <div class="toast-body">Error exporting employees.</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
    </div>
  </div>
</div>

<!-- Invalid file type error toast -->
<div
  id="fileTypeErrorToast"
  class="toast align-items-center text-bg-danger border-0 position-fixed bottom-0 end-0 m-3"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
>
  <div class="d-flex">
    <div class="toast-body">Please upload a CSV or Excel file (.csv, .xls, .xlsx)</div>
    <button
      type="button"
      class="btn-close btn-close-white me-2 m-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
</div>
